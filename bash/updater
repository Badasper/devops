#!/bin/bash
SECONDS=0
# do some work
echo "начало: " `date`

echo -e        "\e[32m--------------------------- Обновление списка пакетов из репозиториев ------------------\e[39m"
if sudo apt-get update -yy
  then echo -e "\e[32m########################### Я закончил обновление списка репозиториев! #################\e[39m"
else echo   -e "\e[31m*************************** Ошибка при обновлении репозиториев! ************************\e[39m"
fi
echo -e        "\e[32m--------------------------- Обновление пакетов -----------------------------------------\e[39m"
if sudo apt-get upgrade -yy
  then echo -e "\e[32m########################### Я закончил обновление пакетов! #############################\e[39m"
else echo   -e "\e[31m*************************** Ошибка при обновлении пакетов! *****************************\e[39m"
fi
echo -e        "\e[32m--------------------------- Обновление дистрибутива ------------------------------------\e[39m"
if sudo apt-get dist-upgrade
  then echo -e "\e[32m########################### Я закончил обновление дистрибутива! ########################\e[39m"
else echo   -e "\e[31m*************************** Ошибка при обновлении дистрибутива! ************************\e[39m"
fi
echo -e        "\e[32m--------------------------- Установка зависимых пакетов --------------------------------\e[39m"
if sudo apt-get install -f
  then echo -e "\e[32m########################### Я закончил установку зависимых пакетов! ####################\e[39m"
else echo   -e "\e[31m*************************** Ошибка при установки зависимостей! *************************\e[39m"
fi
echo -e        "\e[32m--------------------------- Удаление неиспользованных пакетов --------------------------\e[39m"
if sudo apt-get autoremove -yy
  then echo -e "\e[32m########################### Завершил удаление КЭШ! #####################################\e[39m"
fi
if sudo apt-get autoclean -yy
  then echo -e "\e[32m########## autoclean end! #################\e[39m"
fi

echo -e        "\e[32m--------------------------- Удаление sanp пакетов --------------------------\e[39m"
sudo snap refresh;
echo "snap refreshed"
snap list --all | awk '/disabled/{print $1, $3}' | while read snapname revision; do

sudo snap remove "$snapname" --revision="$revision"
done
echo "old snap snapshots are removed"
echo        -e "\e[32m########## Программа завершена, by! #######\e[39m"

duration=$SECONDS
echo "$(($duration / 60)) minutes and $(($duration % 60)) seconds elapsed."


